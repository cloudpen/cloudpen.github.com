---
title: 学籍管理系统中几个微小问题的解决
category: mywork
layout: post
---

<img src='http://cloudpen-image.u.qiniudn.com/xjtl.png'  />

学籍管理系统自开发出来后，上线应用已经有半个月的时间了。这一段时间来感谢学校各位班主任老师能够应用这个系统，并提出了一些系统中存在的BUG，让我得发现问题，并且进行相应的修改。

#### 问题一：

学生数据导出时，部分生僻字无法显示

这个问题其实是由于字符集的原因产生的。因为数据库存储数据的格式定为UTF-8，而导出文件要生成Excel表格，其中的字符最好要是GB类型的，而我在程序当中将导出的字符集由UTF8转成了GB2312，但GB2312的字符集较小，所以一些字符就无法显示。因此要解决这个问题，只需要把字符集改成GBK即可。

#### 问题二：

学生数据导出时，部分字段内容跳行了，没有显示在应该显示的单元格内

这个问题的产生，是由于部分字段内容来自于TextArea，或者由Excel导入时存在换行、回车的现象。因此从数据库中再将导出时，作为回车处理，导致格式不一。

问题的解决方法是，在导出数据时将原来的回车、换行等处理成空格。使用一个正则表达式就可以解决问题。

        $str=preg_replace("/\s/"," ",$str); 

#### 问题三：

同一学期的评语可以重复导入

这个问题的解决非常简单，只需要在导入数据时做一个查重的测试就行了。

以上问题都已顺利解决。希望这个学籍管理系统在各位老师的建议下能够功能愈加完善。